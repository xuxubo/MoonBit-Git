///|
test {
  let url = "https://github.com/xxxxxx/xxxxxx.git"
  let token = "ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxx" // âš ï¸ æ›¿æ¢ä¸ºå®é™… Token
  let repo_dir = "repo"

  // å…‹éš†
  println("ğŸš€ Cloning repo...")
  let repo = git_clone(url, repo_dir)
  println("âœ… Cloned")

  //æ—¥æœŸç›®å½•
  let date_folder = "repo/2025-10-15"
  let _ = mkdir_p(date_folder)

  //å†™æ–‡ä»¶
  let file_path = "repo/2025-10-15/test.md"
  let content = "# Test Review\n\n- Generated from MoonBit + libgit2"
  let _ = write_file(file_path, content)
  println("âœ… File written")

  // æ·»åŠ  + æäº¤ + æ¨é€
  let add_ok = git_add(repo, "2025-10-15/test.md")
  if add_ok == 0 {
    println("âœ… Added file")
    let commit_ok = git_commit(repo, "Add new review via MoonBit")
    if commit_ok == 0 {
      println("âœ… Committed")
      let push_ok = git_push(repo, "origin", token)
      if push_ok == 0 {
        println("âœ… Pushed to GitHub")
      } else {
        println("âŒ Push failed, code=\{push_ok}")
      }
    }
  } else {
    println("âŒ Add failed")
  }
  println("âœ… Repository freed")
  println("âœ¨ Done.")
}
